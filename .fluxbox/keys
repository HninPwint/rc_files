! fluxbox-update_configs added '(workspace=[current])' to (Next|Prev)(Window|Group)
! check lines marked by 'FBCV13' if they are correctly updated
!mouse actions added by fluxbox-update_configs
## This removed by Joey cos it blocks the next
# OnTitlebar Move1 :MacroCmd {Focus} {Raise} {ActivateTab}
!mouse actions added by fluxbox-update_configs
## Either of these works
OnTitlebar Move1 :StartMoving
# OnTitlebar Mouse1 :StartMoving
OnLeftGrip Move1 :StartResizing BottomLeft
OnRightGrip Move1 :StartResizing BottomRight
OnWindowBorder Move1 :StartMoving

## Disable this next line for Homeworld!
OnWindow Mod1 Mouse1 :MacroCmd {Raise} {Focus} {StartMoving}
OnWindow Mod1 Mouse3 :MacroCmd {Raise} {Focus} {StartResizing NearestCorner}
OnWindow Mod1 Mouse2 :MacroCmd {Raise} {Focus} {StartTabbing} {Lower}
# Workaround when Alt-Left-Drag is disabled:
OnWindow Mod4 Mouse1 :MacroCmd {Raise} {Focus} {StartMoving}

# OnTitlebar Mouse1 :MacroCmd {Focus} {Raise} {ActivateTab} {StartMoving}

### Some older defaults:
# !mouse actions added by fluxbox-update_configs
# OnTitlebar Mouse2 :StartTabbing
# 
# !mouse actions added by fluxbox-update_configs
# OnTitlebar Double Mouse1 :Shade
# OnTitlebar Mouse3 :WindowMenu
# 
# !mouse actions added by fluxbox-update_configs
# OnWindow Mod1 Mouse1 :MacroCmd {Raise} {Focus} {StartMoving}
# OnWindow Mod1 Mouse3 :MacroCmd {Raise} {Focus} {StartResizing NearestCorner}
# 
# !mouse actions added by fluxbox-update_configs
# OnToolbar Mouse4 :NextWorkspace
# OnToolbar Mouse5 :PrevWorkspace
# 
# !mouse actions added by fluxbox-update_configs
# OnDesktop Mouse1 :HideMenus
# OnDesktop Mouse2 :WorkspaceMenu
# OnDesktop Mouse3 :RootMenu
# OnDesktop Mouse4 :NextWorkspace
# OnDesktop Mouse5 :PrevWorkspace
# 
# !mouse actions added by fluxbox-update_configs
# OnTitlebar Mouse2 :StartTabbing
# 
# !mouse actions added by fluxbox-update_configs
# OnTitlebar Double Mouse1 :Shade
# OnTitlebar Mouse3 :WindowMenu
# 
# !mouse actions added by fluxbox-update_configs
# OnWindow Mod1 Mouse1 :MacroCmd {Raise} {Focus} {StartMoving}
# OnWindow Mod1 Mouse3 :MacroCmd {Raise} {Focus} {StartResizing NearestCorner}
# 
# !mouse actions added by fluxbox-update_configs
# OnToolbar Mouse4 :NextWorkspace
# OnToolbar Mouse5 :PrevWorkspace
# 
# !mouse actions added by fluxbox-update_configs
# OnDesktop Mouse1 :HideMenus
# OnDesktop Mouse2 :WorkspaceMenu
# OnDesktop Mouse3 :RootMenu
# OnDesktop Mouse4 :NextWorkspace
# OnDesktop Mouse5 :PrevWorkspace

## Joey's keybindings for Fluxbox, some of which require jsh scripts
## Mod1 is Alt - some people might be annoyed if they want to access application
## menus.  Mod4 is Win key.  That's where most people will want the extra
## commands provided here.  But I myself moved a lot of them onto Alt, since it
## is easier for my thumb, and I use them more often than I use app menus.

## Note: You were having problems with some actions happening before others.
## It might be possible to solve this using {Delay {Command...} 1}

## Move between windows (window cycling)
## Disable these to use bbkey's for switching instead (it has a nice menu).  bbkeys may need restarting after reconfiguring fluxbox!
## Sometimes I disable some of them so they are not captured by Fluxbox and can be passed through xvncviewer
### ==OLD== broken versions which worked in earlier versions of fluxbox:
## Bug: ignores window groupings.
## Bug: Fluxbox currently has the bug that Alt-Tab sometimes skips N windows which Alt-grave finds.
## Bug: Damnit now fluxbox has gone completely mad!  It cycles a few windows, on various workspaces!
## Done: OK fluxbox has got better, using the commands below.
# Mod1 Tab :NextWindow {groups}
# Mod1 grave :PrevWindow {groups}
# Mod4 Tab :NextWindow 0
# Mod4 grave :PrevWindow 0
### ==NEW== Fixed versions!
Mod1 Tab :NextWindow {groups} (Workspace=[current])
Mod1 grave :PrevWindow {groups} (Workspace=[current])
Mod4 Tab :NextWindow {groups}
Mod4 grave :PrevWindow {groups}

## Move between windows using a Window List Menu
# Control Tab :ClientMenu (Workspace=[current])
# Control grave :ClientMenu
# Control Tab :ClientMenu
# Control grave :ClientMenu (Class=[current])
# Mod4 Tab :ClientMenu (Workspace!=[current])
# Mod1 1 :ClientMenu
# Mod4 Up :PrevWindow {groups} (stuck=no) (shaded=no)
# Mod1 Up :PrevWindow {groups} (stuck=no) (shaded=no)
# Mod4 Down :NextWindow {groups} (stuck=no) (shaded=no)
# Mod1 Down :NextWindow {groups} (stuck=no) (shaded=no)

## Tabbing with Middle button:
OnTitlebar Mouse2 :MacroCmd {Focus} {StartTabbing} {Lower}
## These two don't work (but are inteded to avoid the lowering):
OnTitlebar Mod1 Mouse2 :MacroCmd {Focus} {StartTabbing}
OnTitlebar Mod4 Mouse2 :MacroCmd {Focus} {StartTabbing}

Control Mod1 r :Reconfigure
Control Mod4 r :Restart
Control Mod1 q :Exit
Control Shift F2 :CommandDialog

# OnTitlebar Mouse2 :StartTabbing
# OnTitlebar Double Mouse1 :Shade
# OnTitlebar Mouse3 :WindowMenu
# OnWindow Mod1 Mouse3 :MacroCmd {Raise} {Focus} {StartResizing BottomRight}
# OnDesktop Mouse1 :hideMenus
# OnDesktop Mouse2 :workspaceMenu
# OnDesktop Mouse3 :rootMenu

## Change desktop with mousewheel on wallpaper
## These next two are really no fun when you have a scrollbar on your laptop's mousepad!
#OnDesktop Mouse4 :PrevWorkspace
#OnDesktop Mouse5 :NextWorkspace
OnDesktop Mod1 Mouse4 :PrevWorkspace
OnDesktop Mod1 Mouse5 :NextWorkspace
OnDesktop Shift Mouse4 :PrevWorkspace 3
OnDesktop Shift Mouse5 :NextWorkspace 3
OnDesktop Mod4 Mouse4 :PrevWorkspace 3
OnDesktop Mod4 Mouse5 :NextWorkspace 3

## Or, to go alongside my compiz binds:
Mod1 Mouse4 :PrevWorkspace
Mod1 Mouse5 :NextWorkspace
Mod4 Mouse4 :PrevWorkspace 3
Mod4 Mouse5 :NextWorkspace 3

OnToolbar Mouse4 :PrevWorkspace
OnToolbar Mouse5 :NextWorkspace

## Sometimes brings the window back to the front again after (due to focus?)
OnTitlebar Double Mouse1 :Lower
# OnTitlebar Double Mouse1 :MacroCmd {Lower}
## Sometimes bring iconified windows up!
# OnTitlebar Double Mouse1 :MacroCmd {Lower} {PrevWindow {groups}}
# OnTitlebar Double Mouse1 :MacroCmd {Lower} {PrevWindow {groups} (stuck=no) (shaded=no) (minimized=no)}
# OnTitlebar Mouse2 :Lower
OnTitlebar Mouse3 :Shade
# OnTitlebar Double Mouse3 :WindowMenu
# OnTitlebar Mod1 Mouse3 :WindowMenu
OnTitlebar Control Mouse3 :WindowMenu
OnTitlebar Mod1 Control Mouse3 :WindowMenu
## Too easy to do by accident, wrt significant change:
# OnTitlebar Mouse4 :TakeToPrevWorkspace
# OnTitlebar Mouse5 :TakeToNextWorkspace
OnTitlebar Mouse4 :MacroCmd {Lower}
# OnTitlebar Mouse4 :ToggleCmd {Lower} {Raise}
# OnTitlebar Mouse5 :MacroCmd {ShadeWindow}
OnTitlebar Mouse5 :MacroCmd {ShadeWindow} {Raise}

OnDesktop Mouse1 :hideMenus
OnDesktop Mouse2 :workspaceMenu
OnDesktop Mouse3 :rootMenu

## The Lower works but the StartTabbing does not.
# Mod1 t :MacroCmd {Raise} {Focus} {StartTabbing} {Lower}
# Mod4 t :StartTabbing

## Currently moves all windows on all desktops!
# Shift Control Mod1 Left :MacroCmd {ForEach {SendToPrevWorkspace 1}} {PrevWorkspace}
# Shift Control Mod1 Right :MacroCmd {ForEach {SendToNextWorkspace 1}} {NextWorkspace}
# Shift Control Mod1 Up :MacroCmd {ForEach {SendToPrevWorkspace 3}} {PrevWorkspace}
# Shift Control Mod1 Down :MacroCmd {ForEach {SendToNextWorkspace 3}} {NextWorkspace}

## According to Hwi's xev, my key "Alt Gr" is Mode_switch, "Win right" is Multi_key, followed by Menu and Control_R

Control Escape :RootMenu

## Move between tabs
Mod1 Left :PrevTab
Mod1 Right :NextTab
# Control Tab :PrevTab
# Control grave :NextTab
# Control Shift Tab :NextTab
Mod4 Left :MoveTabLeft
Mod4 Right :MoveTabRight
# Mod4 Shift Left :MoveTabLeft
# Mod4 Shift Right :MoveTabRight
## not working:
# Mod1 braceleft :MovePrevTab
# Mod4 braceleft :MovePrevTab
# Mod1 braceright :MoveNextTab
# Mod4 braceright :MoveNextTab

## Do things to windows
# Mod1 c :Close
# Mod4 c :Close
Mod1 F4 :Close
Mod1 q :Close
Mod4 q :KillWindow
## None of these work in 1.3.2-4
# Mod1 a :Lower
Mod1 a :MacroCmd {Lower} {Focus}
# Mod1 a :MacroCmd {Lower} {Activate}
# Mod1 a :MacroCmd {Lower} {ActivateTab} {Raise}
# Mod1 a :MacroCmd {Lower} {Reconfig}
Mod4 a :Lower
Mod1 d :ShadeWindow
Mod4 d :ShadeWindow
Mod1 o :DetachClient
Mod4 o :DetachClient
# Mod1 s :StickWindow
Mod1 s :StickWindow {groups} (shaded=no)
Mod4 s :StickWindow {groups} (shaded=no)
Mod1 i :Minimize
Mod4 i :Minimize
Mod1 z :MaximizeWindow
Mod4 z :MaximizeWindow
Mod1 v :MaximizeVertical
Mod4 v :MaximizeVertical
Mod1 h :MaximizeHorizontal
Mod4 h :MaximizeHorizontal
Mod1 f :ToggleDecor
Mod4 f :ToggleDecor
# Mod1 t :ToggleTab
# Mod4 t :ToggleTab
## Temporarily force a window to the top layer
Mod4 t :ToggleCmd {SetLayer Top} {SetLayer Normal}

Mod1 F9 :ExecCommand xsnapshot
Mod4 F9 :ExecCommand xsnapshot
Control F9 :ExecCommand xsnapshot -window

## Run top in an xterm to peek on the system and processes
Mod1 t :ExecCommand xtermbg -bg '#330000' -geometry 132x28 -e top -n 100

## Changing workspace
Control Mod1 Left :PrevWorkspace
Control Mod1 Right :NextWorkspace
Control Mod1 Up :PrevWorkspace 3
Control Mod1 Down :NextWorkspace 3
Shift Mod1 Left :TakeToPrevWorkspace
Shift Mod1 Right :TakeToNextWorkspace
Shift Mod1 Up :TakeToPrevWorkspace 3
Shift Mod1 Down :TakeToNextWorkspace 3
## This makes sense if you have three columns of desktops

#Mod1 1 :Workspace 1
#Mod1 2 :Workspace 2
#Mod1 3 :Workspace 3

## Known bug with NextWorkspace: it wastes the next keyboard input in an annoying way!
## http://sourceforge.net/tracker/?func=detail&aid=3190205&group_id=35398&atid=413960
## So we try this workaround, but it is pretty slow.  I think the original bug was better!
## (20111210: I may have sped it up a bit by linking the script into ~/bin.)
Control Mod4 Left  :ExecCommand wmctrl_emulate_fluxbox_command :PrevWorkspace
Control Mod4 Right :ExecCommand wmctrl_emulate_fluxbox_command :NextWorkspace
Control Mod4 Up    :ExecCommand wmctrl_emulate_fluxbox_command :PrevWorkspace       3
Control Mod4 Down  :ExecCommand wmctrl_emulate_fluxbox_command :NextWorkspace       3
Mod4 Shift Left    :ExecCommand wmctrl_emulate_fluxbox_command :TakeToPrevWorkspace
Mod4 Shift Right   :ExecCommand wmctrl_emulate_fluxbox_command :TakeToNextWorkspace
Mod4 Shift Up      :ExecCommand wmctrl_emulate_fluxbox_command :TakeToPrevWorkspace 3
Mod4 Shift Down    :ExecCommand wmctrl_emulate_fluxbox_command :TakeToNextWorkspace 3

# Swap all windows between two workspaces
Control Mod4 Shift Left :ExecCommand move_windows_between_desktops swapdesktops left
Control Mod4 Shift Right :ExecCommand move_windows_between_desktops swapdesktops right
Control Mod4 Shift Up :ExecCommand move_windows_between_desktops swapdesktops up
Control Mod4 Shift Down :ExecCommand move_windows_between_desktops swapdesktops down
# I wanted to bind these to Control Mod1 Shift but for some strange reason that:
#   1. didn't work, and
#   2. over an un-tabbed xterm, changed the size of the xterm!

# Mod1 F1 :Workspace 1
# Mod1 F2 :Workspace 2
# Mod1 F3 :Workspace 3
# Mod1 F4 :Workspace 4
# Mod1 F5 :Workspace 5
# Mod1 F6 :Workspace 6
# Mod1 F7 :Workspace 7
# Mod1 F8 :Workspace 8
# Mod4 F1 :Workspace 1
# Mod4 F2 :Workspace 2
# Mod4 F3 :Workspace 3
# Mod4 F4 :Workspace 4
# Mod4 F5 :Workspace 5
# Mod4 F6 :Workspace 6
# Mod4 F7 :Workspace 7
# Mod4 F8 :Workspace 8

### Moving windows
## Gnome-style not working:
# Control KP_Right :NudgeRight
# Control KP_Left :NudgeLeft
# Control KP_Down :NudgeDown
# Control KP_Up :NudgeUp
# Mod1 KP_Right :BigNudgeRight
# Mod4 KP_Right :BigNudgeRight
# Mod1 KP_Left :BigNudgeLeft
# Mod4 KP_Left :BigNudgeLeft
# Mod1 KP_Down :BigNudgeDown
# Mod4 KP_Down :BigNudgeDown
# Mod1 KP_Up :BigNudgeUp
# Mod4 KP_Up :BigNudgeUp
## Fluxbox-style:
## Move windows around with Ctrl-Alt-KeypadArrows
Control Mod1 KP_Right :MoveRight +25
Control Mod1 KP_Left :MoveRight -25
Control Mod1 KP_Up :MoveUp +25
Control Mod1 KP_Down :MoveUp -25
# Mod4 KP_Right :MoveRight +8
# Mod4 KP_Left :MoveRight -8
# Mod4 KP_Up :MoveUp +8
# Mod4 KP_Down :MoveUp -8
## Move all windows together - this can be useful to recover after wm restarts and they have all shifted a little bit out of place.
## DONE: Seems to work double/triple/etc. on groups of tags - should do for each group not for each tab.
# Shift Control Right :ForEach {MoveRight +4} {{groups}}
# Shift Control Left :ForEach {MoveRight -4} {{groups}}
# Shift Control Up :ForEach {MoveUp +4} {{groups}}
# Shift Control Down :ForEach {MoveUp -4} {{groups}}
## Fix problems where everything on the screen has translated by the same amount (e.g. fallen down 12 pixels).
## by large amouts with Control Shift
Control Shift KP_Right :ForEach {MoveRight +4} {{groups}}
Control Shift KP_Left :ForEach {MoveRight -4} {{groups}}
Control Shift KP_Up :ForEach {MoveUp +4} {{groups}}
Control Shift KP_Down :ForEach {MoveUp -4} {{groups}}
## by small amouts with Control Win
Control Mod4 KP_Right :ForEach {MoveRight +1} {{groups}}
Control Mod4 KP_Left :ForEach {MoveRight -1} {{groups}}
Control Mod4 KP_Up :ForEach {MoveUp +1} {{groups}}
Control Mod4 KP_Down :ForEach {MoveUp -1} {{groups}}

## Resizing windows
# Mod1 KP_5 :VerticalDecrement
# Mod4 KP_5 :HorizontalDecrement
# Mod4 KP_Divide :HorizontalDecrement
# Mod4 KP_Multiply :HorizontalIncrement
# Mod4 KP_Subtract :VerticalDecrement
# Mod4 KP_Add :VerticalIncrement
## Mmm problem.  xterms require +/-4, other apps require +/-12
Mod4 KP_Multiply :Resize +8 0
Mod4 KP_Divide :Resize -8 0
Mod4 KP_Add :Resize 0 +8
Mod4 KP_Subtract :Resize 0 -8

Mod1 F2 :ExecCommand runacommand

## Audio
Mod1 KP_Multiply :ExecCommand volumeup 9
Mod1 KP_Divide   :ExecCommand volumedown 9
Mod1 KP_Add      :ExecCommand volumeup 2
Mod1 KP_Subtract :ExecCommand volumedown 2
## (play)
# Mod1 KP_1 :ExecCommand xmms -p
Mod1 KP_1 :ExecCommand XLIB_SKIP_ARGB_VISUALS=1 xmms -p
## (stop)
Mod1 KP_3 :ExecCommand xmms -s
## (pause)
Mod1 KP_0 :ExecCommand xmms -u
## (back)
Mod1 KP_7 :ExecCommand xmms -r
## (forward)
#Mod1 KP_9 :ExecCommand xmms -f
Mod1 KP_9 :ExecCommand /home/joey/j/jsh nextsong
Mod1 KP_Delete :ExecCommand xmms -s
Mod1 KP_5     :ExecCommand whatsplaying
Mod4 slash    :ExecCommand whatsplaying
## Neither of these worked:
#Control Slash :ExecCommand whatsplaying
#Control Shift Slash :ExecCommand whatsplaying

## only work if your X is configured correctly:
## actually completely steals my keyboard!
# None XF86AudioPlay :ExecCommand xmms -u
# None XF86AudioStop :ExecCommand xmms -s
Mod1 Print :ExecCommand import -window root /tmp/screenshot-$$.bmp
Mod4 Print :ExecCommand import -window root /tmp/screenshot-$$.bmp

Mod4 k :ExecCommand save_desktop
Mod4 l :ExecCommand load_desktop

# Mod1 x :ExecCommand xterm -bg black -fg white -font '-*-fixed-*-r-*-*-12-*-*-*-*-*-*-*'
# Mod4 x :ExecCommand xterm

## This got me the font I wanted:
# Mod1 x :ExecCommand xtermbg
## TESTING if inlining makes it faster (was sometimes pretty sluggish under Fluxbox)
## Without /usr/bin/ this created a forkbomb!  Must have broken unj somehow.
## Yes this is much faster.  (But it lacks the lighter bg option.)
# Mod1 x :ExecCommand /usr/bin/xterm -cc 33:48,37:48,45-47:48,64:48,126:48 -rightbar +sb -sl 5000 -vb -si -sk -bg black -fg white -font '-b&h-lucidatypewriter-medium-r-normal-*-*-80-*-*-m-*-iso8859-1' -rightbar -j -s
## Now let's try the symlink in my PATH:
# Mod1 x :ExecCommand xterm
Mod1 x :ExecCommand /home/joey/j/tools/xterm
# The problem is my 'xtermbg' script runs my 'xterm' script and that uses 'unj'
# which is part of jsh.  For faster startup we need to run xterm without
# involving jsh (or trim down jsh's tools folder!).

# Mod4 x :ExecCommand xtermbg
Mod4 x :ExecCommand XLIB_SKIP_ARGB_VISUALS=1 xmms -p

Mod1 e :ExecCommand eterm
Mod4 e :ExecCommand ~/bin/konqueror
# Mod1 w :ExecCommand google-chrome
# Mod4 w :ExecCommand google-chrome
Mod1 w :ExecCommand chromium-browser
Mod4 w :ExecCommand chromium-browser

## Push windows to edges or corners of the screen (no resizing)
## These got a lot faster when I linked that script into ~/bin
## I think sometimes $JPATH/tools becomes un-cached and is then very slow to read the next time.
Mod4 KP_1 :ExecCommand put_current_xwindow sw
Mod4 KP_2 :ExecCommand put_current_xwindow bottom
Mod4 KP_3 :ExecCommand put_current_xwindow se
Mod4 KP_4 :ExecCommand put_current_xwindow left
# Mod4 KP_5 :ExecCommand put_current_xwindow center_x
# Mod4 KP_5 :ExecCommand put_current_xwindow center_y
Mod4 KP_5 :ExecCommand put_current_xwindow center
Mod4 KP_6 :ExecCommand put_current_xwindow right
Mod4 KP_7 :ExecCommand put_current_xwindow nw
Mod4 KP_8 :ExecCommand put_current_xwindow top
Mod4 KP_9 :ExecCommand put_current_xwindow ne

## Basic tiling - really sucks with kicker panels or gkrellm running.
Control Mod1 a :ArrangeWindows

